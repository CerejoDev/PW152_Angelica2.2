/*
* FILE: AResUmds.cpp
*
* DESCRIPTION: 
*
* CREATED BY: Zhangyachuan, 2010/7/2
*
* HISTORY: 
*
* Copyright (c) 2010 Archosaur Studio, All Rights Reserved.
*/

#include "stdafx.h"
#include "AResPreRequireHeader.h"
#include "AResManager.h"
#include "AResUmds.h"

///////////////////////////////////////////////////////////////////////////
//	
//	Define and Macro
//	
///////////////////////////////////////////////////////////////////////////


///////////////////////////////////////////////////////////////////////////
//	
//	Reference to External variables and functions
//	
///////////////////////////////////////////////////////////////////////////


///////////////////////////////////////////////////////////////////////////
//	
//	Local Types and Variables and Global variables
//	
///////////////////////////////////////////////////////////////////////////


///////////////////////////////////////////////////////////////////////////
//	
//	Local functions
//	
///////////////////////////////////////////////////////////////////////////


///////////////////////////////////////////////////////////////////////////
//	
//	Implement AResUmds
//	
///////////////////////////////////////////////////////////////////////////

AResUmds::AResUmds(AResManager* pResMan)
: base_class(pResMan)
{
}

AResUmds::~AResUmds(void)
{
}

bool AResUmds::ProcessFile(const char* szPath)
{
	IResUnlitModelSet* pUmds = m_pResMan->GetResInterface()->LoadUmds(szPath);
	if (!pUmds)
	{
		g_pResLog->Log("%s, Failed to load umds file %s", __FUNCTION__, szPath);
		return false;
	}
	
	for (int nUmdIdx = 0; nUmdIdx < pUmds->GetUnlitModelNum(); ++nUmdIdx)
	{
		IResUnlitModel* pUmd = pUmds->GetUnlitModel(nUmdIdx);
		ProcessUmdTex(pUmd);
	}

	return true;
}